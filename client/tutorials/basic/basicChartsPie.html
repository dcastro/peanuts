<html>
<head>

    <title>Peanuts</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/deps/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="/deps/highlightjs/styles/darkula.css">
    <link rel="stylesheet" href="/assets/styles/styles.css">
    
    <script src="/assets/scripts/codePrinter.js"></script>

    <script src="/deps/highlightjs/highlight.pack.min.js"></script>
    <script src="/deps/dat.gui/build/dat.gui.min.js"></script>
    <script src="/deps/stats-js/build/stats.min.js"></script>
    <script src="/deps/signals/dist/signals.min.js"></script>

    <script src="/deps/three/build/three.min.js"></script>
    <script src="/deps/three/examples/js/controls/OrbitControls.js"></script>

    <script src="/app/peanuts.js"></script>
    <script src="/app/peanuts.three.driver.js"></script>
    <script src="/app/peanuts.three.inputs.js"></script>
    <script src="/app/peanuts.three.assets.js"></script>
    <script src="/app/peanuts.three.loaders.js"></script>
    <script src="/app/peanuts.three.app.js"></script>
    <script src="/app/peanuts.three.app.builder.js"></script>
    <script src="/app/peanuts.three.app.factory.js"></script>
    <script src="/app/peanuts.three.view.js"></script>
    <script src="/app/peanuts.three.view.builder.js"></script>
    <script src="/app/peanuts.three.charts.js"></script>
    <script src="/app/peanuts.three.charts.pie.js"></script>
    <script src="/app/ui/peanuts.three.dat.gui.lights.js"></script>
    <script src="/app/ui/peanuts.three.dat.gui.materials.js"></script>

    <style type="text/css">
        .threeApp {
            height: 300px;
        }
    </style>

</head>

<body class="page">

<div class="container">

    <h1>Basic Charts</h1>

    <h2>Pie Chart</h2>

    <div id="app" class="threeApp"></div>

    <script type="text/javascript">

        (CodePrinter.printAndRun(function(initUI) {

            var Charts = Peanuts.Three.Charts;          //Alias for brevity
            var MatProviders = Charts.MatProviders;     //Alias for brevity

            // Create a new Peanuts app
            var app = new Peanuts.Three.App.Factory(
                document.getElementById("app")
            ).createDemoGLPerspectiveApp();

            // Create a new Pie Chart
            var chart = new Charts.PieChart([10,10,5,10,5], {}, {
                    // material : MatProviders.BasicPhongProvider(
                    //     ['red', 'green', 'blue']
                    // )
                }
            );

            app.view.setScene(new THREE.Scene());   //Create the scene
            app.view.scene.add(chart.renderable);   //Add the chat renderable
            app.view.camera.position.set(0,0, 5);  //Move the camera back a bit

            app.start(); // Start the app

            initUI(app); //Ignore me, demo menu initalisation

        }, function(app) {

                var directionalLight = app.view.scene.addIt(new THREE.DirectionalLight(0xFFFFFF));
                var ambientLight = app.view.scene.addIt(new THREE.AmbientLight(0xFFFFFF));

                Peanuts.Three.DatGui.Helpers.Lights.Ambient.add(
                    app.datGui.addFolder("AmbientLight"), {
                        color: 0xFFFFFF
                    }, {},  
                    function(lightSettings) {
                        directionalLight.color =  new THREE.Color(lightSettings.color);
                    }
                );

                Peanuts.Three.DatGui.Helpers.Lights.Directional.add(
                    app.datGui.addFolder("DirectionalLight"), {
                        color: 0xFFFFFF,
                        intensity: 0.6,
                        distance: 2,
                        phi: 5.3,
                        theta: 3
                    }, {},  
                    function(lightSettings) {
                        directionalLight.color =  new THREE.Color(lightSettings.color);
                        directionalLight.intensity = lightSettings.intensity;
                        directionalLight.position.setFromSpherical(
                            new THREE.Spherical(
                                lightSettings.distance,
                                lightSettings.phi,
                                lightSettings.theta
                            )
                        );
           
                    }
                );
            }
        ))();

    </script>

</div>

</body>

</html>